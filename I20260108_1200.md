 âœ… Fixed and pushed!

  What Was Fixed

  The CI/CD pipeline was failing because GitHub Actions doesn't automatically inject secrets as environment variables. They must be explicitly mapped in the workflow YAML.

  Changes Made

  Updated 3 jobs in .github/workflows/flutter-cicd.yml:

  1. test-feature (feature branch checks)

  2. build-stage (stage branch builds)

  3. build-main (main branch builds)

  Each job now maps ALL environment variables expected by generate-env.sh:

  Previously mapped (5 variables):
  - âœ… VRON_API_URI
  - âœ… VRON_MERCHANTS_URL
  - âœ… APP_COOKIE_DOMAIN
  - âœ… BLENDER_API_BASE_URL
  - âœ… BLENDER_API_KEY

  Newly added (7 variables):
  - âœ… ENV
  - âœ… DEBUG
  - âœ… BLENDER_API_TIMEOUT_SECONDS
  - âœ… BLENDER_API_POLL_INTERVAL_SECONDS
  - âœ… ROOM_ROTATION_DEGREES
  - âœ… DOOR_CONNECTION_THRESHOLD
  - âœ… CANVAS_GRID_SIZE

  Result

  The generate-env.sh script will now receive all environment variables. Even if some secrets aren't set in GitHub, the script has fallback defaults, so the pipeline will succeed.

  Commit: e5cc4ad - fix: map all environment variables to GitHub Actions jobs
  Pushed to: origin/stage

  The pipeline should now work correctly! ðŸš€

# -----

 Perfect! All fixes have been pushed to stage. Here's what was fixed:

  âœ… Fix 1: Android Product Flavors

  Problem: CI/CD used --flavor stage and --flavor prod but no flavors were defined in android/app/build.gradle.kts

  Solution: Added product flavors:
  flavorDimensions += "environment"
  productFlavors {
      create("stage") {
          dimension = "environment"
          applicationIdSuffix = ".stage"  // com.example.vronmobile2.stage
          versionNameSuffix = "-stage"
      }
      create("prod") {
          dimension = "environment"
          // Uses base applicationId: com.example.vronmobile2
      }
  }

  Benefits:
  - Stage and prod apps can be installed side-by-side on the same device
  - Clear version identification (1.0.0-stage vs 1.0.0)
  - Matches CI/CD workflow expectations

  âœ… Fix 2: Semantic Release Tagging

  Problem: persist-credentials: false prevented semantic-release from pushing tags and version commits

  Solution:
  1. Workflow changes (.github/workflows/flutter-cicd.yml):
    - Removed persist-credentials: false
    - Added explicit token: ${{ secrets.GITHUB_TOKEN }}
    - Added permissions block:
        - contents: write - push tags and commits
      - issues: write - close issues
      - pull-requests: write - comment on PRs
  2. Added changelog generation:
    - Added @semantic-release/changelog plugin to .releaserc.json
    - Added dependency to package.json

  Versioning Strategy:
  - Stage branch â†’ Beta versions: 1.0.0-beta.1, 1.0.0-beta.2, etc.
  - Main branch â†’ Stable versions: 1.0.0, 1.0.1, 1.1.0, etc.
  - Auto-updates pubspec.yaml with version
  - Creates GitHub releases with release notes
  - Generates CHANGELOG.md automatically

  Commits pushed:
  1cd11f1 - fix: add Android flavors and fix semantic-release tagging for stage/main
  8a1e38b - fix: add Android product flavors for stage and prod builds
  e5cc4ad - fix: map all environment variables to GitHub Actions jobs

  The pipeline should now successfully build Android apps and create proper semantic version tags! ðŸš€
