# Mutation to update project master data fields
# Feature: Project Detail and Data Management (UC11)
# Used in: ProjectDataScreen (save operation)
#
# This mutation updates editable project fields (name, slug, description).
# Only provided fields will be updated; omitted fields remain unchanged.
#
# Parameters:
#   - $id: ID! - The project identifier to update
#   - $data: UpdateProjectInput! - Object containing fields to update
#
# Returns: Updated Project object with modified fields

mutation updateProject($id: ID!, $data: UpdateProjectInput!) {
  updateProject(id: $id, data: $data) {
    # Return updated fields for immediate UI refresh
    id
    slug
    name {
      text(lang: EN)
    }
    description {
      text(lang: EN)
    }
    imageUrl
  }
}

# Input Type Definition (defined in backend schema):
# input UpdateProjectInput {
#   name: String           # Optional: New project name (1-100 chars)
#   slug: String           # Optional: New URL slug (3-50 chars, lowercase alphanumeric + hyphens)
#   description: String    # Optional: New description (0-500 chars)
# }

# Example Request:
# {
#   "id": "proj_abc123",
#   "data": {
#     "name": "Marketing Analytics Platform",
#     "slug": "marketing-analytics-platform",
#     "description": "Comprehensive analytics dashboard for tracking campaign performance."
#   }
# }

# Example Response:
# {
#   "updateProject": {
#     "id": "proj_abc123",
#     "slug": "marketing-analytics-platform",
#     "name": {
#       "text": "Marketing Analytics Platform"
#     },
#     "description": {
#       "text": "Comprehensive analytics dashboard for tracking campaign performance."
#     },
#     "imageUrl": "https://cdn.vron.com/projects/proj_abc123/thumb.jpg"
#   }
# }

# Validation Rules (enforced by backend):
# - name: Required if provided, 1-100 characters
# - slug: Required if provided, 3-50 characters, must be unique per user, lowercase alphanumeric + hyphens
# - description: Optional, 0-500 characters
#
# Error Scenarios:
# - Project not found: GraphQL error "Project not found"
# - Unauthorized: GraphQL error "Not authorized to update this project"
# - Slug already exists: GraphQL error "Slug is already in use"
# - Validation failure: GraphQL error with specific field error message
# - Network/server error: Generic GraphQL error

# Client-Side Validation (before mutation):
# The client should validate all fields before sending the mutation to provide
# immediate feedback and reduce server load. See ProjectValidator utility class.
